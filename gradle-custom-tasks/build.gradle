/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
 
 
class CustomParentTask extends DefaultTask {	
	String cv_var1
	@TaskAction
	void build() {
		println "CustomParentTask:build() $cv_var1"
		cv_var1 = "CHANGE IN BUILD"
	}
}
task customParent(type: CustomParentTask) {
	// Initialization
	customParent.ext.var1 = 'INITIAL'
	cv_var1 = customParent.ext.var1
	println "customParent:Initialization"
	
	// Execution
	// doFirst -> build() -> doLast
	doFirst {
		custom.var1 = 'hello'
		customParent.ext.var1 = 'World'
		cv_var1 = customParent.ext.var1
		println "customParent:doFirst"
	}
	doLast {
		println "customParent:doLast"
	}
}

class CustomTask extends DefaultTask {
	@TaskAction
	void build() {
		println "CustomTask:build()"
	}
}
task custom(type: CustomTask, dependsOn: customParent) {	
	// Initialization
	custom.ext.var1 = ''
	println "custom:Initialization"
	
	// Execution
	// doFirst -> build() -> doLast
	doFirst {
		println "custom:doFirst $custom.ext.var1 $customParent.var1"
	}
	doLast {
		println "custom:doLast"
	}
}
